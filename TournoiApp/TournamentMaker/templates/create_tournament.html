{% extends 'base_generic.html' %}

{% block title %}
  <title>Créer un tournoi</title>
{% endblock %}

{% block content %}
<style>
  /* Masquer tous les boutons de navigation sauf le bouton Accueil */
  .nav-buttons-container .nav-button:not(:first-child) {
    display: none !important;
  }
</style>

<div class="container mt-5" style="color: black;">
  <h2 class="text-center mb-4">Créer un nouveau tournoi</h2>

  <form method="POST" class="w-75 mx-auto p-4 border rounded bg-light shadow" style="color: black;">
    {% csrf_token %}

    <div class="form-group">
      <label for="name"><strong>Nom du tournoi :</strong></label>
      <input type="text" class="form-control" name="name" required>
    </div>

    <div class="form-group">
      <label for="city"><strong>Ville :</strong></label>
      <input type="text" class="form-control" name="city" required>
    </div>

    <div class="form-group">
      <label for="address"><strong>Adresse :</strong></label>
      <input type="text" class="form-control" name="address">
    </div>

    <div class="form-group form-check mt-3">
      <input type="checkbox" class="form-check-input" name="is_indoor" id="indoorCheck">
      <label class="form-check-label" for="indoorCheck"><strong>Tournoi en intérieur</strong></label>
    </div>

    <div class="form-group mt-3">
      <label for="start_date"><strong>Date de début :</strong></label>
      <input type="date" class="form-control" name="start_date" required>
    </div>

    <div class="form-group mt-3">
      <label for="end_date"><strong>Date de fin :</strong></label>
      <input type="date" class="form-control" name="end_date" required>
    </div>

    <div class="form-group mt-3">
      <label for="sport"><strong>Sport :</strong></label>
      <select class="form-control" name="sport" required>
        <option value="">-- Choisissez un sport --</option>
        <option value="football">Football</option>
        <option value="volleyball">Volleyball</option>
        <option value="basketball">Basketball</option>
        <option value="rugby">Rugby</option>
      </select>
    </div>

    <div class="form-group mt-3">
      <label><strong>Type de Tournoi :</strong></label>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="type_tournament" id="roundRobin" value="RR" checked onchange="togglePoolsField()">
        <label class="form-check-label" for="roundRobin">
          Tournoi à la Ronde
        </label>
      </div>
       <div class="form-group mt-3" id="nb_pools_group">
      <label for="nb_pools"><strong>Nombre de poules :</strong></label>
      <input type="number" class="form-control" name="nb_pools" min="1">
    </div>

      <div class="form-check">
        <input class="form-check-input" type="radio" name="type_tournament" id="directElimination" value="DE" onchange="togglePoolsField()">
        <label class="form-check-label" for="directElimination">
          Élimination Directe
        </label>
      </div>
    </div>

   
    <hr class="my-4">

    <div class="form-group">
      <label for="nb_teams"><strong>Nombre d’équipes :</strong></label>
      <input type="number" class="form-control" name="nb_teams" min="1" required>
    </div>

    <div class="form-group mt-3">
      <label for="players_per_team"><strong>Joueurs par équipe :</strong></label>
      <input type="number" class="form-control" name="players_per_team" min="1" required>
    </div>

    <div class="form-group mt-3">
      <label for="nb_sets_to_win"><strong>Nombre de sets pour gagner un match :</strong></label>
      <input type="number" class="form-control" name="nb_sets_to_win" min="1" required>
    </div>

    <div class="form-group mt-3">
      <label for="points_per_set"><strong>Points par set :</strong></label>
      <input type="number" class="form-control" name="points_per_set" min="1" required>
    </div>

    <button type="submit" class="btn btn-success mt-4 w-100">Créer le tournoi</button>
  </form>
</div>

<script>
  function togglePoolsField() {
    var roundRobinSelected = document.getElementById('roundRobin').checked;
    var nbPoolsGroup = document.getElementById('nb_pools_group');

    if (roundRobinSelected) {
      nbPoolsGroup.style.display = 'block';
    } else {
      nbPoolsGroup.style.display = 'none';
    }
  }

  // Appeler la fonction au chargement de la page pour gérer l'état initial
  window.onload = function() {
    togglePoolsField();
  };
</script>
{% endblock %}
